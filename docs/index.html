<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>scru128/c: SCRU128: Sortable, Clock and Random number-based Unique identifier</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">scru128/c
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">SCRU128: Sortable, Clock and Random number-based Unique identifier </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> <a href="https://github.com/scru128/c"><img src="https://img.shields.io/github/v/tag/scru128/c" alt="GitHub tag" class="inline"/></a> <a href="https://github.com/scru128/c/blob/main/LICENSE"><img src="https://img.shields.io/github/license/scru128/c" alt="License" class="inline"/></a></p>
<p >SCRU128 ID is yet another attempt to supersede <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a> for the users who need decentralized, globally unique time-ordered identifiers. SCRU128 is inspired by <a href="https://github.com/ulid/spec">ULID</a> and <a href="https://github.com/segmentio/ksuid">KSUID</a> and has the following features:</p>
<ul>
<li>128-bit unsigned integer type</li>
<li>Sortable by generation time (as integer and as text)</li>
<li>25-digit case-insensitive textual representation (Base36)</li>
<li>48-bit millisecond Unix timestamp that ensures useful life until year 10889</li>
<li>Up to 281 trillion time-ordered but unpredictable unique IDs per millisecond</li>
<li>80-bit three-layer randomness for global uniqueness</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="scru128_8h.html">scru128.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <a class="code hl_struct" href="struct_scru128_generator.html">Scru128Generator</a> g;</div>
<div class="line">  <a class="code hl_function" href="scru128_8h.html#a51408a063f653d25ca8654f842b35ac0">scru128_initialize_generator</a>(&amp;g);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// generate a new identifier object</span></div>
<div class="line">  <a class="code hl_struct" href="struct_scru128_id.html">Scru128Id</a> x;</div>
<div class="line">  <a class="code hl_function" href="scru128_8c.html#ad2603535abc615d96cbc17f20c20e894">scru128_generate</a>(&amp;g, &amp;x);</div>
<div class="line">  <span class="keywordtype">char</span> text[26];</div>
<div class="line">  <a class="code hl_function" href="scru128_8c.html#a71e6a763e65433ffd5127608c9428111">scru128_to_str</a>(&amp;x, text);</div>
<div class="line">  puts(text); <span class="comment">// e.g. &quot;036Z951MHJIKZIK2GSL81GR7L&quot;</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// generate a textual representation directly</span></div>
<div class="line">  <a class="code hl_function" href="scru128_8c.html#a28db60fa0f71c034729b7523e4ee1422">scru128_generate_string</a>(&amp;g, text);</div>
<div class="line">  puts(text); <span class="comment">// e.g. &quot;036Z951MHZX67T63MQ9XE6Q0J&quot;</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="ascru128_8c_html_a28db60fa0f71c034729b7523e4ee1422"><div class="ttname"><a href="scru128_8c.html#a28db60fa0f71c034729b7523e4ee1422">scru128_generate_string</a></div><div class="ttdeci">int scru128_generate_string(Scru128Generator *g, char *out)</div><div class="ttdoc">Generates a new SCRU128 ID encoded in the 25-digit canonical string representation using the generato...</div><div class="ttdef"><b>Definition:</b> scru128.c:218</div></div>
<div class="ttc" id="ascru128_8c_html_a71e6a763e65433ffd5127608c9428111"><div class="ttname"><a href="scru128_8c.html#a71e6a763e65433ffd5127608c9428111">scru128_to_str</a></div><div class="ttdeci">void scru128_to_str(const Scru128Id *id, char *out)</div><div class="ttdoc">Returns the 25-digit canonical string representation of a SCRU128 ID.</div><div class="ttdef"><b>Definition:</b> scru128.c:86</div></div>
<div class="ttc" id="ascru128_8c_html_ad2603535abc615d96cbc17f20c20e894"><div class="ttname"><a href="scru128_8c.html#ad2603535abc615d96cbc17f20c20e894">scru128_generate</a></div><div class="ttdeci">int scru128_generate(Scru128Generator *g, Scru128Id *out)</div><div class="ttdoc">Generates a new SCRU128 ID using the generator g.</div><div class="ttdef"><b>Definition:</b> scru128.c:208</div></div>
<div class="ttc" id="ascru128_8h_html"><div class="ttname"><a href="scru128_8h.html">scru128.h</a></div><div class="ttdoc">SCRU128: Sortable, Clock and Random number-based Unique identifier.</div></div>
<div class="ttc" id="ascru128_8h_html_a51408a063f653d25ca8654f842b35ac0"><div class="ttname"><a href="scru128_8h.html#a51408a063f653d25ca8654f842b35ac0">scru128_initialize_generator</a></div><div class="ttdeci">static void scru128_initialize_generator(Scru128Generator *g)</div><div class="ttdoc">Initializes a generator struct g.</div><div class="ttdef"><b>Definition:</b> scru128.h:261</div></div>
<div class="ttc" id="astruct_scru128_generator_html"><div class="ttname"><a href="struct_scru128_generator.html">Scru128Generator</a></div><div class="ttdoc">Represents a SCRU128 ID generator that encapsulates the monotonic counter and other internal states.</div><div class="ttdef"><b>Definition:</b> scru128.h:91</div></div>
<div class="ttc" id="astruct_scru128_id_html"><div class="ttname"><a href="struct_scru128_id.html">Scru128Id</a></div><div class="ttdoc">Represents a SCRU128 ID and provides various converters and comparison operators.</div><div class="ttdef"><b>Definition:</b> scru128.h:35</div></div>
</div><!-- fragment --><p >See <a href="https://github.com/scru128/spec">SCRU128 Specification</a> for details.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Build</h1>
<p ><code><a class="el" href="scru128_8h.html" title="SCRU128: Sortable, Clock and Random number-based Unique identifier.">scru128.h</a></code> and <code><a class="el" href="scru128_8c.html" title="SCRU128: Sortable, Clock and Random number-based Unique identifier.">scru128.c</a></code> currently do not include any platform-dependent code (they depend on <code>stdint.h</code> only) and thus platform-specific functions to access to the system clocks and random number generators have to be implemented separately. Define the following two functions in a separate source file and link it to <code><a class="el" href="scru128_8c.html" title="SCRU128: Sortable, Clock and Random number-based Unique identifier.">scru128.c</a></code> at build time. Examples are found in the <a href="https://github.com/scru128/c/tree/main/platform">platform</a> directory.</p>
<div class="fragment"><div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Returns the current unix time in milliseconds.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * @param out Location where the returned value is stored.</span></div>
<div class="line"><span class="comment"> * @return Zero on success or a non-zero integer on failure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="scru128_8c.html#a5550ce4391d2b3cef29f63f6a4b5e926">scru128_get_msec_unixts</a>(uint64_t *out);</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Returns a 32-bit random unsigned integer.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * @param out Location where the returned value is stored.</span></div>
<div class="line"><span class="comment"> * @return Zero on success or a non-zero integer on failure.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="scru128_8c.html#ada8613dffe0dce4953acec130b6168e7">scru128_get_random_uint32</a>(uint32_t *out);</div>
<div class="ttc" id="ascru128_8c_html_a5550ce4391d2b3cef29f63f6a4b5e926"><div class="ttname"><a href="scru128_8c.html#a5550ce4391d2b3cef29f63f6a4b5e926">scru128_get_msec_unixts</a></div><div class="ttdeci">int scru128_get_msec_unixts(uint64_t *out)</div><div class="ttdoc">Returns the current unix time in milliseconds.</div></div>
<div class="ttc" id="ascru128_8c_html_ada8613dffe0dce4953acec130b6168e7"><div class="ttname"><a href="scru128_8c.html#ada8613dffe0dce4953acec130b6168e7">scru128_get_random_uint32</a></div><div class="ttdeci">int scru128_get_random_uint32(uint32_t *out)</div><div class="ttdoc">Returns a 32-bit random unsigned integer.</div></div>
</div><!-- fragment --><p >Alternatively, you can specify the compiler flag <code>-DSCRU128_NO_GENERATOR</code> to build <code><a class="el" href="scru128_8c.html" title="SCRU128: Sortable, Clock and Random number-based Unique identifier.">scru128.c</a></code> without generator functionality.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
License</h1>
<p >Licensed under the Apache License, Version 2.0.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
See also</h1>
<ul>
<li><a href="https://scru128.github.io/c/scru128_8h.html">Doxygen generated docs</a> for provided functions </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
